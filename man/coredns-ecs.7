.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-ECS" 7 "July 2025" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIecs\fP - ECS plugin

.SH "DESCRIPTION"
.PP
Passes the client's source address in the EDNS client subnet option (if not already present in the query), to return better results when forwarding queries to CDNs.

.SH "SYNTAX"
.PP
.RS

.nf
ecs {
    mask\_v4 SIZE
    mask\_v6 SIZE
}

.fi
.RE

.IP \(bu 4
\fB\fCmask_v4\fR - Optional (defaults to 24), specifies the mask to be applied to the client's source IPv4 address for privacy protection
.IP \(bu 4
\fB\fCmask_v6\fR - Optional (defaults to 56), specifies the mask to be applied to the client's source IPv6 address for privacy protection


.SH "EXAMPLES"
.PP
Passes the client's source address in the EDNS client subnet option, forwarding to 8.8.8.8:

.PP
.RS

.nf
\&. {
    ecs

    # Do not use 1.1.1.1, it explicitly blocks ECS
    forward . 8.8.8.8
}

.fi
.RE

